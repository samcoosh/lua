image:
  - Visual Studio 2019
  
platform:
  - x64
  
configuration:
  - Release
  
install:  
  - git submodule update --init --recursive
  
before_build:
- cmd: cmake -H. -B./.build -DCMAKE_INSTALL_PREFIX=./package
  
build:
  publish_nuget: true
  verbosity: normal
  project: .build/INSTALL.vcxproj
  
after_test:
  - cmd: nuget pack -Version %APPVEYOR_BUILD_VERSION%
  
artifacts:
  - path: '**\*.nupkg'
  
deploy:
- provider: NuGet
  server: https://nuget.pkg.github.com/samcoosh/index.json
  api_key:
    secure: 2AqJH4Jst2cs7tHM9ttpFdyeIQl2lcaTlYXxyBQ7DiHvYQuySJMHRCy0Qz4c4odh
  username:
    secure: Wu+S0QmwcP6ak4Gv3+iZgg==
  skip_symbols: true